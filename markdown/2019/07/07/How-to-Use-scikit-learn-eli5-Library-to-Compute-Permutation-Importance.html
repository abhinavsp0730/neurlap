<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance? | Abhinav Prakash</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results" />
<meta property="og:description" content="Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results" />
<link rel="canonical" href="https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html" />
<meta property="og:url" content="https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html" />
<meta property="og:site_name" content="Abhinav Prakash" />
<meta property="og:image" content="https://abhinavsp0730.github.io/neurlap/images/article3.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-07T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results","mainEntityOfPage":{"@type":"WebPage","@id":"https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html"},"@type":"BlogPosting","url":"https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html","headline":"How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?","dateModified":"2019-07-07T00:00:00-05:00","datePublished":"2019-07-07T00:00:00-05:00","image":"https://abhinavsp0730.github.io/neurlap/images/article3.jpeg","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/neurlap/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://abhinavsp0730.github.io/neurlap/feed.xml" title="Abhinav Prakash" /><link rel="shortcut icon" type="image/x-icon" href="/neurlap/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance? | Abhinav Prakash</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results" />
<meta property="og:description" content="Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results" />
<link rel="canonical" href="https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html" />
<meta property="og:url" content="https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html" />
<meta property="og:site_name" content="Abhinav Prakash" />
<meta property="og:image" content="https://abhinavsp0730.github.io/neurlap/images/article3.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-07T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results","mainEntityOfPage":{"@type":"WebPage","@id":"https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html"},"@type":"BlogPosting","url":"https://abhinavsp0730.github.io/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html","headline":"How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?","dateModified":"2019-07-07T00:00:00-05:00","datePublished":"2019-07-07T00:00:00-05:00","image":"https://abhinavsp0730.github.io/neurlap/images/article3.jpeg","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://abhinavsp0730.github.io/neurlap/feed.xml" title="Abhinav Prakash" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/neurlap/">Abhinav Prakash</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/neurlap/articles/">Articles</a><a class="page-link" href="/neurlap/project/">Projects</a><a class="page-link" href="/neurlap/tweets/">Tweets</a><a class="page-link" href="/neurlap/about/">About Me</a><a class="page-link" href="/neurlap/achievements/">Achievements</a><a class="page-link" href="/neurlap/search/">Search</a><a class="page-link" href="/neurlap/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?</h1><p class="page-description">Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2019-07-07T00:00:00-05:00" itemprop="datePublished">
        Jul 7, 2019
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/neurlap/categories/#markdown">markdown</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#feature-permutation-importance-with-eli5--towards-ai">Feature Permutation Importance with ‘eli5’ | Towards AI</a></li>
<li class="toc-entry toc-h2"><a href="#how-to-use-scikit-learn-eli5-library-to-compute-permutation-importance">How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?</a>
<ul>
<li class="toc-entry toc-h3"><a href="#understanding-the-workings-of-scikit-learns-eli5-library-to-compute-feature-importance-on-a-sample-housing-dataset-and-interpreting-its-results">Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#what-is-it">What is it?</a></li>
<li class="toc-entry toc-h2"><a href="#how-does-it-work">How does it work?</a></li>
<li class="toc-entry toc-h2"><a href="#should-i-compute-importance-on-training-or-test-datavalidation-data">Should I compute importance on Training or Test data(validation data)?</a></li>
<li class="toc-entry toc-h2"><a href="#eli5--a-scikit-learn-library-">eli5 — a scikit-learn library:-</a>
<ul>
<li class="toc-entry toc-h3"><a href="#caution-to-take-before-using-eli5-">caution to take before using eli5:-</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#now-let-us-get-some-test-of-codes-">Now, let us get some test of codes 😋</a></li>
<li class="toc-entry toc-h2"><a href="#interpreting-results-">Interpreting Results:-</a>
<ul>
<li class="toc-entry toc-h3"><a href="#you-can-get-the-housing-data-set-in-csv-format-from-my-github-profile">You can get the housing-data set in .csv format from my GitHub profile</a></li>
<li class="toc-entry toc-h3"><a href="#you-can-also-get-ipnyb-filekaggle-kernel-file-from-my-github-profile">You can also get .ipnyb file(kaggle Kernel) file from my GitHub profile</a></li>
<li class="toc-entry toc-h3"><a href="#httpsgithubcomabhinavsp0730housing_datablobmasterkernel659579854a2ipynb">https://github.com/abhinavsp0730/housing_data/blob/master/kernel659579854a(2).ipynb</a></li>
<li class="toc-entry toc-h3"><a href="#thank-you">THANK YOU</a></li>
<li class="toc-entry toc-h3"><a href="#if-you-enjoy-my-article-then-do-claps-and-follow-me-️">If you enjoy my article then do claps and follow me ❤️.</a></li>
</ul>
</li>
</ul><h3 id="feature-permutation-importance-with-eli5--towards-ai">
<a class="anchor" href="#feature-permutation-importance-with-eli5--towards-ai" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feature Permutation Importance with ‘eli5’ | <a href="https://towardsai.net/">Towards AI</a>
</h3>

<h2 id="how-to-use-scikit-learn-eli5-library-to-compute-permutation-importance">
<a class="anchor" href="#how-to-use-scikit-learn-eli5-library-to-compute-permutation-importance" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?</h2>

<h3 id="understanding-the-workings-of-scikit-learns-eli5-library-to-compute-feature-importance-on-a-sample-housing-dataset-and-interpreting-its-results">
<a class="anchor" href="#understanding-the-workings-of-scikit-learns-eli5-library-to-compute-feature-importance-on-a-sample-housing-dataset-and-interpreting-its-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Understanding the workings of scikit-learn’s ‘eli5’ library to compute feature importance on a sample housing dataset and interpreting its results</h3>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*U1LPRoodN_CLmwq2SnFhPQ.jpeg" alt="cc: Forbes"></p>

<p>Most of the Data Scientist(ML guys) treat their machine learning model as a black-box. They don’t know what are the things which are happening underhood.
 They load their data, do manual data cleaning &amp; prepare their data to fit it on ml modal. Then the train their model &amp; predict the target values(regression problem).</p>

<p><strong>But they don’t know, what features does their model think are important?</strong></p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*TBnt_U1s-X_f9Eham_plCQ.jpeg" alt=""></p>

<p>For answering the above question Permutation Importance comes into the picture.</p>

<h2 id="what-is-it">
<a class="anchor" href="#what-is-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it?</h2>

<p>Permutation Importance is an algorithm that computes importance scores
for each of the feature variables of a dataset,
The importance measures are determined by computing the sensitivity of a model to random permutations of feature values.</p>

<h2 id="how-does-it-work">
<a class="anchor" href="#how-does-it-work" aria-hidden="true"><span class="octicon octicon-link"></span></a>How does it work?</h2>

<p>The concept is really straightforward: 
We measure the importance of a feature by calculating the increase in the model’s prediction error after permuting the feature. 
A feature is “important” if shuffling its values increases the model error because in this case, the model relied on the feature for the prediction.
A feature is “unimportant” if shuffling its values leave the model error unchanged because in this case, the model ignored the feature for the prediction.</p>

<h2 id="should-i-compute-importance-on-training-or-test-datavalidation-data">
<a class="anchor" href="#should-i-compute-importance-on-training-or-test-datavalidation-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Should I compute importance on Training or Test data(validation data)?</h2>

<p>The answer to this question is, we always measure permutation importance on test data.
 permutation importance based on training data is garbage. The permutation importance based on training data makes us mistakenly believe that features are important for the predictions when in reality the model was just overfitting and the features were not important at all.</p>

<h2 id="eli5--a-scikit-learn-library-">
<a class="anchor" href="#eli5--a-scikit-learn-library-" aria-hidden="true"><span class="octicon octicon-link"></span></a>eli5 — a scikit-learn library:-</h2>

<p>eli5 is a scikit learn library, used for computing permutation importance.</p>

<h3 id="caution-to-take-before-using-eli5-">
<a class="anchor" href="#caution-to-take-before-using-eli5-" aria-hidden="true"><span class="octicon octicon-link"></span></a>caution to take before using eli5:-</h3>

<p>**1. **Permutation Importance is calculated after a model has been fitted.</p>

<p>**2. **We always compute permutation importance on test data(Validation Data).</p>

<p>**3. **The output of eli5 is in HTML format. So, we can only use it in the ipython notebook(i.e Jupiter notebook, google collab &amp; kaggle kernel, etc).</p>

<h2 id="now-let-us-get-some-test-of-codes-">
<a class="anchor" href="#now-let-us-get-some-test-of-codes-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Now, let us get some test of codes 😋</h2>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*FKiXevC6N5GwuurghctByw.gif" alt=""></p>

<p>I’ve built a rudimentary model(RandomForestRegressor) to predict the sale price of the housing data set.
 This is a good dataset example for showing the Permutation Importance because this dataset has a lot of features.
So, we can see which features make an impact while predicting the values and which are not.</p>

<iframe src="https://medium.com/media/403caf5e064b28b365194f1d03ecf74d" frameborder="0"></iframe>

<p><em>Now, we use the ‘eli5’ library to calculate Permutation importance.</em></p>

<iframe src="https://medium.com/media/91c8acade31aa861b8d5e1be98f37473" frameborder="0"></iframe>

<p><em>you can see the output of the above code below:-</em></p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*8uCcJc3BZrJ1QdIGXPpXDQ.png" alt=""></p>

<h2 id="interpreting-results-">
<a class="anchor" href="#interpreting-results-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Interpreting Results:-</h2>

<p>Features have decreasing importance in top-down order. 
The first number in each row shows the reduction in model performance by the reshuffle of that feature. 
The second number is a measure of the randomness of the performance reduction for different reshuffles of the feature column. 
 overallQual(overall quality) feature of the housing data set makes the biggest impact in the model while predicting the Sale Price.</p>

<h3 id="you-can-get-the-housing-data-set-in-csv-format-from-my-github-profile">
<a class="anchor" href="#you-can-get-the-housing-data-set-in-csv-format-from-my-github-profile" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>You can get the housing-data set in .csv format from my GitHub profile</em>
</h3>
<p>LINK:- <a href="https://github.com/abhinavsp0730/housing_data/blob/master/home-data-for-ml-course.zip">https://github.com/abhinavsp0730/housing_data/blob/master/home-data-for-ml-course.zip</a></p>

<h3 id="you-can-also-get-ipnyb-filekaggle-kernel-file-from-my-github-profile">
<a class="anchor" href="#you-can-also-get-ipnyb-filekaggle-kernel-file-from-my-github-profile" aria-hidden="true"><span class="octicon octicon-link"></span></a>You can also get .ipnyb file(kaggle Kernel) file from my GitHub profile</h3>
<p>LINK:-</p>

<h3 id="httpsgithubcomabhinavsp0730housing_datablobmasterkernel659579854a2ipynb">
<a class="anchor" href="#httpsgithubcomabhinavsp0730housing_datablobmasterkernel659579854a2ipynb" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="https://github.com/abhinavsp0730/housing_data/blob/master/kernel659579854a(2).ipynb">https://github.com/abhinavsp0730/housing_data/blob/master/kernel659579854a(2).ipynb</a>
</h3>

<h3 id="thank-you">
<a class="anchor" href="#thank-you" aria-hidden="true"><span class="octicon octicon-link"></span></a>THANK YOU</h3>

<h3 id="if-you-enjoy-my-article-then-do-claps-and-follow-me-️">
<a class="anchor" href="#if-you-enjoy-my-article-then-do-claps-and-follow-me-%EF%B8%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>If you enjoy my article then do claps and follow me ❤️.</h3>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*HnhqbqJ1vlHFEZmO5oEtqQ.gif" alt=""></p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="abhinavsp0730/neurlap"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/neurlap/markdown/2019/07/07/How-to-Use-scikit-learn-eli5-Library-to-Compute-Permutation-Importance.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/neurlap/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/neurlap/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/neurlap/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/abhinavsp0730" title="abhinavsp0730"><svg class="svg-icon grey"><use xlink:href="/neurlap/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/abhinav-prakash-706902171" title="abhinav-prakash-706902171"><svg class="svg-icon grey"><use xlink:href="/neurlap/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/neurlap" title="neurlap"><svg class="svg-icon grey"><use xlink:href="/neurlap/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
